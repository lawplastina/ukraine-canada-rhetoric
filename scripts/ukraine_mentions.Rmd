---
title: "Ukraine Mentions"
author: "Lawrence Plastina"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, echo = FALSE}
# Load quanteda if not already loaded
library(quanteda)

# Create corpus
putin_corpus_int <- corpus(ru_transcripts_putin, text_field = "transcript_filtered") 

# Tokenize and remove Russian stopwords
putin_tokens <- tokens(putin_corpus_int, remove_punct = TRUE) |>
  tokens_select(pattern = stopwords("ru", source = "snowball"), 
               selection = "remove")

# Define target forms of "Украина"
target_words_ua <- c("украина", "украины", "украине", "украину", "украиной", "украине",
                       # Masculine Singular
  "украинский", "украинского", "украинскому", "украинского", "украинским", "украинском",

  # Feminine Singular
  "украинская", "украинской", "украинскую", "украинской", "украинской",

  # Neuter Singular
  "украинское", "украинского", "украинскому", "украинское", "украинским", "украинском",

  # Plural (Masculine Animate Accusative = Genitive)
  "украинские", "украинских", "украинским", "украинские", "украинскими", "украинских")

# Convert tokens to list of character vectors
putin_token_list <- as.list(putin_tokens)

# Check for presence of any target word in each document
matches_ua <- sapply(putin_token_list, function(doc) any(target_words_ua %in% doc))

# Count and calculate proportion
match_count_ua <- sum(matches_ua)
total_docs_ua <- ndoc(putin_corpus_int)
match_proportion_ua <- match_count_ua / total_docs_ua

# Output results
cat("Matching documents:", match_count_ua, "\n")
cat("Total documents:", total_docs_ua, "\n")
cat("Proportion:", round(match_proportion_ua * 100, 2), "%\n")
```

